<?xml version = "1.0"?>
<QUERIES>
    <QUERY_GROUP id="WORKLIST_ARCHIVIO_ESTRAZIONE">
    	<QUERY id="WK_DRG_ANOMALI">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA,
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE,
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			LEFT OUTER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' 
			  			AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
			  			AND CONTATTI.CODICE_DRG In (select CODICE_VARCHAR from FX$FILTRI where ID_FILTRO = 'DRG_ANOMALI_ESTRAZIONE' AND USERNAME = :username)
      			]]>
            </SQL>
        </QUERY> 
        <QUERY id="WK_DATI_TRAUMATISMO">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA,
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE,
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			LEFT OUTER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' 
			  			AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
			  			AND EXTRACTVALUE (CONTATTI.METADATI, '/METADATI/DATO[@KEY="TRAUMATISMI_DIMISSIONE"]/@ID') IS  NOT NULL
		              	AND (
		                	EXTRACTVALUE (CONTATTI.METADATI,'/METADATI/DATO[@KEY="CAUSA_ESTERNA_DIMISSIONE"]/@ID') IS NULL OR
		                	EXTRACTVALUE (CONTATTI.METADATI,'/METADATI/DATO[@KEY="CATEGORIA_CAUSA_ESTERNA_DIMISSIONE"]/@ID')IS NULL
		              	)
      			]]>
            </SQL>
        </QUERY>
        <QUERY id="WK_MEDICO_DIMISSIONE">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA,
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE, 
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			LEFT OUTER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
			  			AND CONTATTI.UTENTE_DIMISSIONE IS NULL
      			]]>
            </SQL>
        </QUERY>
        <QUERY id="WK_MEDICO_ACCETTAZIONE">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA, 
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE,
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			LEFT OUTER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' 
			  			AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
			  			AND CONTATTI.UTENTE_ACCETTAZIONE IS NULL
      			]]>
            </SQL>
        </QUERY>
        <QUERY id="WK_DIAGNOSI_ACCETTAZIONE">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA, 
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE,
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			LEFT OUTER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' 
			  			AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
			  			AND EXTRACTVALUE(CONTATTI.METADATI,'/METADATI/DATO[@KEY="DIAGNOSI_ACCETTAZIONE"]') IS NULL
      			]]>
            </SQL>
        </QUERY>
        <QUERY id="WK_ONERE_DIVERSO_SSN">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA,
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE, 
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			LEFT OUTER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' 
			  			AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
			  			AND EXTRACTVALUE(CONTATTI.METADATI,'/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]') <> '1'
      			]]>
            </SQL>
        </QUERY>
        <QUERY id="WK_STD">
            <SQL>
            	<![CDATA[
			        SELECT
			        	ANAGRAFICA.COGNOME || ' ' || ANAGRAFICA.NOME || ' ' || TO_CHAR(TO_DATE(ANAGRAFICA.DATA_NASCITA,'yyyyMMdd'),'dd/MM/yyyy') || ' ' || CONTATTI.CODICE AS ASSISTITO,
			  			CONTATTI.IDEN AS IDEN_CONTATTO, CONTATTI.CODICE AS CODICE,
			  			TO_CHAR(CONTATTI.DATA_INIZIO,'yyyyMMdd') AS DATA_INIZIO, TO_CHAR(CONTATTI.DATA_FINE,'yyyyMMdd') AS DATA_FINE,  
			  			CONTATTI.REGIME AS REGIME_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.REGIME) AS REGIME_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.REGIME) AS REGIME_DESCRIZIONE,
			  			CONTATTI.TIPO AS TIPO_IDEN,
			 			CODIFICHE.ENCODETIPO(CONTATTI.TIPO) AS TIPO_CODICE,
			  			CODIFICHE.DESCRIBETIPO(CONTATTI.TIPO) AS TIPO_DESCRIZIONE,
			  			DECODE(CONTATTI.IMPORTO_DRG, 0, NULL, CONTATTI.IMPORTO_DRG) AS DRG_IMPORTO, 
			  			DECODE(CONTATTI.IMPORTO_DRG_FUORISOGLIA, 0, NULL, CONTATTI.IMPORTO_DRG_FUORISOGLIA) AS DRG_IMPORTO_FUORISOGLIA,
			  			CONTATTI.CODICE_DRG AS DRG_CODICE, D24.DESCRIZIONE AS DRG_DESCRIZIONE,   
			  			DECODE(CONTATTI.CODICE_DRG, NULL, NULL, CONTATTI.CODICE_DRG || ' - ' || D24.DESCRIZIONE) AS DRG_CODICE_DESCRIZIONE, 
			  			(SELECT TASL.ASL_DESCR FROM FX$TAB_ASL TASL WHERE TASL.REG_CODICE = COMUNI.CODICE_REGIONE AND TASL.AZD_CODICE = COMUNI.CODICE_USL) AS ASL_RESIDENZA,
			  			CODIFICHE.DESCRIBETIPO(EXTRACTVALUE(CONTATTI.Metadati, '/METADATI/DATO[@KEY="ADT_ACC_RICOVERO_ONERE"]/@ID')) As ONERE_DESCRIZIONE,
			 			CODIFICHE.DESCRIBETIPO(CONTATTI.MOTIVO) AS MOTIVO_DESCRIZIONE,
			  			(SELECT DESCRIZIONE FROM FX$CENTRI_DI_COSTO where iden = CONTATTI.CDC_ULTIMO_GIURIDICO) AS CDC_DMISSIONE,
			  			(
			    			SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			    			WHERE CCI.IDEN_CONTATTO = CONTATTI.IDEN AND CCI.ATTIVO = 'S' AND CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) And CCI.TIPO = 'PROCEDURE' And CCI.ORDINE = '0'
			  			) AS INTERVENTO_PRINCIPALE,
			  			(
			   				SELECT CCI.CODICE || ' ' || ICD.DESCRIZIONE 
			    			FROM CONTATTI_CODICI_ICD CCI INNER JOIN FX$ICD9 ICD ON CCI.RIFERIMENTO_CODICE = ICD.IDEN
			   				WHERE CCI.IDEN_CONTATTO=CONTATTI.IDEN AND CCI.ATTIVO='S' And CCI.EVENTO = CODIFICHE.DECODETIPO('ADT_EVENTO_DIAGNOSI_INTERVENTI','A03',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA) and CCI.TIPO='DIAGNOSI' and CCI.ORDINE='0'
			  			) AS DIAGNOSI_PRINCIPALE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_DIMISSIONE) AS UTENTE_DIMISSIONE,
			  			(SELECT DESCRIZIONE FROM FX$PERSONALE WHERE IDEN = CONTATTI.UTENTE_ACCETTAZIONE) AS UTENTE_ACCETTAZIONE
					FROM 
			  			CONTATTI  
			  			INNER JOIN FX$ANAGRAFICA ANAGRAFICA ON ANAGRAFICA.IDEN = CONTATTI.IDEN_ANAGRAFICA
			  			INNER JOIN DRG24 D24 ON D24.DRG = CONTATTI.CODICE_DRG
			  			INNER JOIN FX$COMUNI COMUNI ON COMUNI.IDEN_COMUNE = ANAGRAFICA.IDEN_COMUNE_RESIDENZA
					WHERE   
			  			CONTATTI.DELETED = 'N' 
			  			AND CONTATTI.STATO = CODIFICHE.DECODETIPO('STATO','DISCHARGED',NULL,CONTATTI.ASSIGNING_AUTHORITY_AREA)
			  			AND ('1' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA) OR '2' = CODIFICHE.ENCODETIPO(CONTATTI.REGIME,CONTATTI.ASSIGNING_AUTHORITY_AREA))
			  			AND CONTATTI.DATA_FINE > TO_DATE(:da_data,'yyyyMMdd') AND CONTATTI.DATA_FINE <= TO_DATE(:a_data,'yyyyMMdd') + 1
			  			AND CONTATTI.CDC_ULTIMO_GIURIDICO IN (select iden FROM FX$CENTRI_DI_COSTO WHERE ATTIVO = 'S' AND SUB_CODICE_STRUTTURA IN (SELECT CODICE_VARCHAR FROM FX$FILTRI WHERE ID_FILTRO = 'STRUTTURE_ESTRAZIONE' AND USERNAME = :username))
			  			AND ANAGRAFICA.IDEN NOT IN (1027414,1529134,1481044,618432,618431,785258,1618977,1618783,1622192,1618784,1618786,1625451)
      			]]>
            </SQL>
        </QUERY> 
    </QUERY_GROUP>
    <QUERY_GROUP id="FILTRI_ARCHIVIO_ESTRAZIONE">
    	<QUERY id="Q_STRUTTURE_PRESIDIO">
            <SQL>
                SELECT DISTINCT
				  	SUB_CODICE_STRUTTURA AS VALUE,
				  	DECODE(SUB_CODICE_STRUTTURA, '01','ALBENGA','02','PIETRA LIGURE','03','CAIRO','04','SAVONA') AS DESCR
				FROM
				  	FX$CENTRI_DI_COSTO
				WHERE
					CODICE_STRUTTURA IN (SELECT DISTINCT CODICE_STRUTTURA FROM FX$CENTRI_DI_COSTO WHERE ARCHIVIO_CARTELLE = 'S' AND COD_CDC IN (SELECT REPARTO from FX$WEB_CDC WHERE WEBUSER = :username))
					AND ATTIVO = 'S'
					AND SUB_CODICE_STRUTTURA IN ('01','02','03','04')
            </SQL>
            <BINDS>
                <BIND id="username" value="#USERNAME#" type="V"></BIND>
            </BINDS>
        </QUERY>
        <QUERY id="Q_DRG_ANOMALI">
            <SQL>
                SELECT DRG AS VALUE, DESCRIZIONE AS DESCR FROM DRG24 WHERE DRG_ANOMALO = 'S'
            </SQL>
            <BINDS>
                <BIND id="username" value="#USERNAME#" type="V"></BIND>
            </BINDS>
        </QUERY>
    </QUERY_GROUP>
</QUERIES>