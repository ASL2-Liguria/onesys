<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Conferma Orario</title>
<style>

</style>
</head>

<body onload="init();">
	
    <div>
	    <Label>Data</Label><input id="txtData"/>
    	<Label>Ora</Label><input id="txtOra"/>
    </div>
    
    <div>
    	<label>Note</label>
	    <textarea id="txtNote"></textarea>
    </div>
    
    <div>
    	<span id="btnConferma">Conferma</span>
    </div>

</body>

<script>
	function init(){
		try{
		document.getElementById("btnConferma").onclick = registra;

		var Parameters = window.dialogArguments;
	
		document.getElementById("txtData").value = Convert.toView(Parameters.data);
		document.getElementById("txtOra").value = Parameters.ora;
		document.getElementById("txtNote").innerText = Parameters.note;
		}catch(e){
			alert(e.description);
		}
	}

	function registra(){
		var Response = new Object();
		Response.data =Convert.toIso( document.getElementById("txtData").value );
		Response.ora = document.getElementById("txtOra").value;
		Response.note = document.getElementById("txtNote").innerText;		
		
		window.returnValue = Response;
		window.close();
	}


	var Convert = {
		
		toIso:function(pValue){
			return pValue.substring(6,10)+pValue.substring(3,5)+pValue.substring(0,2);
		},
		
		toView:function(pValue){
			return pValue.substring(6,8)+'/'+pValue.substring(4,6)+'/'+pValue.substring(0,4);			
		}
	}
</script>



</html>
