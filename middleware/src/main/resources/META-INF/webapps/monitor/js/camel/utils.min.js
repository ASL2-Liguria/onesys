ace.require("ace/ext/language_tools");toastr.options={closeButton:true,debug:false,newestOnTop:true,progressBar:true,positionClass:"toast-top-right",preventDuplicates:false,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var XML_CHAR_MAP={"<":"<",">":">","&":"&amp;",'"':'"',"'":"'"};function escapeXml(a){return a.replace(/[<>&"']/g,function(b){return XML_CHAR_MAP[b]})}function getURLIP(){return location.hostname}function getURLParameter(b,a){var c=$.url().param(b);if(typeof c=="undefined"){return a}return c}function dateToYYYYMMDD(){var b=new Date();var a=b.getDate();var c=b.getMonth()+1;var d=b.getFullYear();return""+d+(c<=9?"0"+c:c)+(a<=9?"0"+a:a)}function dateHR(){var b=new Date();var i=b.getDate();var c=b.getMonth()+1;var d=b.getFullYear();var f=b.getHours();var e=b.getMinutes();var a=b.getSeconds();var g=b.getMilliseconds();var h=""+(i<=9?"0"+i:i)+"/"+(c<=9?"0"+c:c)+"/"+d;h+=" "+(f<=9?"0"+f:f)+":"+(e<=9?"0"+e:e)+":"+(a<=9?"0"+a:a)+"."+g;return h}function toB64(a){return $().crypt({method:"b64enc",source:a})}function fromB64(a){if(a.length>0){return $().crypt({method:"b64dec",source:a})}return""}function getKey(){return $().crypt({method:"sha1",source:"ELCOManager"+dateToYYYYMMDD()})}function notify(c,b,a){if(a=="success"){toastr.options.positionClass="toast-top-right"}else{toastr.options.positionClass="toast-top-full-width"}toastr[a](c,b)}function editModalDialog(g,f,e,a,d){var b=$("div#alert");b.dialog({autoOpen:false,closeOnEscape:false,position:{my:"top center",at:"top center",of:$("div#tabs")}});b.dialog({title:g,modal:true,draggable:true,resizable:true,height:$(window).height()*0.95,width:"85%",show:{effect:"fade",duration:500},hide:{effect:"scale",duration:1000}});b.html("<div id='scriptEditorMiddleware' style='width:100%; height:100%;'></div>");var c=ace.edit("scriptEditorMiddleware");c.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true});c.setTheme("ace/theme/eclipse");c.getSession().setMode("ace/mode/"+e);c.setHighlightActiveLine(true);c.setHighlightSelectedWord(true);c.setShowFoldWidgets(true);c.setShowPrintMargin(false);c.setValue(f,-1);b.dialog({buttons:[{text:"Save",click:function(){if(isDisabled()){readOnly()}else{var h=c.getValue();if(h.length>0){divQuestion.html('<h4>Content will be saved.<br/>Are you sure?</h4><input type="button" id="yes" value="Yes" /><input type="button" id="no" value="No" />');$.blockUI({message:divQuestion,css:{padding:"25px",backgroundColor:"#eee",width:"375px"}});$("input#yes").click(function(){a(h)});$("input#no").click(function(){unblockUIBlack();return false})}else{notify("","Content cannot be empty","warning");unblockUIBlack()}}}}]});b.dialog({close:function(h,i){d(h)}});b.dialog({open:function(h,i){unblockUIBlack()}});b.dialog("open")}function readOnly(){divQuestion.html('<h4>Read only session.</h4><input type="button" id="ok" value="Ok" />');$.blockUI({message:divQuestion,css:{padding:"25px",backgroundColor:"#eee",width:"375px"}});$("input#ok").click(function(){unblockUIBlack();return false})}function blockUIBlack(){$.blockUI({message:'<h4><img src="monitor/images/busy.gif" /> OPERATION IN PROGRESS, PLEASE WAIT...</h4>',css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px",opacity:0.5,color:"#fff"}})}function unblockUIBlack(){$.unblockUI()}function isDisabled(){return userRoles=="admin"?false:true}function updateTips(a){$(".validateTips").text(a).addClass("ui-state-highlight");setTimeout(function(){$(".validateTips").removeClass("ui-state-highlight")},1500)}function checkLength(d,b,c,a){if(d.val().length>a||d.val().length<c){d.addClass("ui-state-error");updateTips("Length of "+b+" must be between "+c+" and "+a+".");return false}else{d.removeClass("ui-state-error");return true}}function checkRegexp(c,b,a){if(!(b.test(c.val()))){c.addClass("ui-state-error");updateTips(a);return false}else{c.removeClass("ui-state-error");return true}}function resetAccordion(a){if(a.hasClass("ui-accordion")){a.accordion("destroy")}a.off();a.empty()};